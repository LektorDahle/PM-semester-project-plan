<!--                                    -->
<!--                                    -->
<!--                                    -->
<!-- =================================  -->
<!-- This was made for fun, and is not  -->
<!-- intended as part of my submisson!  -->
<!-- =================================  -->
<!--                                    -->
<!--                                    -->
<!--                                    -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Colour</title>
</head>

<body>

</body>
<script id="coloursList" type="application/json">
    {
        "colours": [
            {
                "id": "foreground",
                "name": "Black",
                "hex": "#000000",
                "role": "text",
                "description": "Primær tekstfarge",
                "theme": "light"
            },
            {
                "id": "background",
                "name": "White",
                "hex": "#ffffff",
                "role": "background",
                "description": "Hovedbakgrunn",
                "theme": "light"
            },
            {
                "id": "examle1",
                "name": "Brand Blue",
                "hex": "#0066cc",
                "role": "accent",
                "description": "Primær aksentfarge",
                "theme": "light"
            },
            {
                "id": "examle2",
                "name": "Dark Blue",
                "hex": "#003366",
                "role": "accent",
                "description": "Primær aksentfarge",
                "theme": "light"
            }
        ]
    }
</script>
<script defer>

    function hexadecimalToDecimal(hexadecimal) {
        const hexaNumbers = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"]
        let pow = hexadecimal.length - 1;
        let num = 0;
        for (let i of hexadecimal) {
            const value = hexaNumbers.indexOf(i);
            num += value * (16 ** pow);
            pow--;
        }
        return num;
    }
    hexadecimalToDecimal("10")
    function hexToRGB(hex) {
        const r = hex.substring(1, 3)
        const rDec = hexadecimalToDecimal(r);
        const g = hex.substring(3, 5)
        const gDec = hexadecimalToDecimal(g);
        const b = hex.substring(5, 7)
        const bDec = hexadecimalToDecimal(b);
        return { r: rDec, g: gDec, b: bDec };
    }

    function linearValue(value) {
        if (value <= 0.03928) {
            return value / 12.92
        }
        return ((value + 0.055) / 1.055) ** 2.4
    }

    function contrastRatio(r1 = 0, g1 = 0, b1 = 0, r2 = 255, g2 = 255, b2 = 255) {
        const norm_r1 = r1 / 255;
        const norm_g1 = g1 / 255;
        const norm_b1 = b1 / 255;
        const norm_r2 = r2 / 255;
        const norm_g2 = g2 / 255;
        const norm_b2 = b2 / 255;

        const R_1 = linearValue(norm_r1);
        const G_1 = linearValue(norm_g1);
        const B_1 = linearValue(norm_b1);
        const R_2 = linearValue(norm_r2);
        const G_2 = linearValue(norm_g2);
        const B_2 = linearValue(norm_b2);

        const L1 = 0.2126 * R_1 + 0.7152 * G_1 + 0.0722 * B_1;
        const L2 = 0.2126 * R_2 + 0.7152 * G_2 + 0.0722 * B_2;

        let contrastNum = 0;
        if (L1 < L2) {
            contrastNum = (L2 + 0.05) / (L1 + 0.05);
        }
        else {
            contrastNum = (L1 + 0.05) / (L2 + 0.05);
        }
        if (contrastNum < 3) {
            return `Kontrast ${contrastNum}:1 og dekker ikke WCAG-standard`;
        }
        else if (contrastNum < 4.5) {
            return `Kontrast ${contrastNum}:1 som er AA for stor tekst`;
        }
        else if (contrastNum < 7) {
            return `Kontrast ${contrastNum}:1 som er AA for tekst og AAA for stor tekst`;
        }
        else return `Kontrast ${contrastNum}:1 som er AAA`;
    }

    console.log(contrastRatio())

    const raw = document.getElementById("coloursList").textContent;
    const data = JSON.parse(raw);

    const body = document.querySelector("body");

    for (let i of data.colours) {
        const colourCard = document.createElement("div");
        const parentColour = document.createElement("div");
        parentColour.style.background = i["hex"];
        parentColour.style.width = "100px";
        parentColour.style.height = "100px";


        const hex = document.createElement("p");
        hex.innerText = i["hex"];
        const { r, g, b } = hexToRGB(i["hex"]);
        const rgbColour = document.createElement("p");
        rgbColour.innerText = `RGB = (${r}, ${g}, ${b})`;

        colourCard.append(hex, rgbColour)
        //parentColour.appendChild(hex);
        body.appendChild(colourCard);
        //for (let i of data.colours){

        //}
    }
</script>

</html>